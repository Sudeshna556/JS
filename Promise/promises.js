// it is an object that  represents the completion or failure of an asynchronous operation and its resulting value. 

// A Promise is in one of these states or properties of promise object:
// pending: initial state, neither fulfilled nor rejected. // result : undefined
// fulfilled: meaning that the operation was completed successfully. // resulted value
// rejected: meaning that the operation failed. // error object


//creating a promise
  const promiseOne = new Promise (function(resolve,reject){
    // it has two parts resolve and reject
    // async tasks like db calls to insert,delete or any kind of data manipulations can be done,or cryptography related tasks, or network calls etc
     
    setTimeout(function(){
            console.log('async task');
            resolve() // connects resolve and .then fun
    },1000)
  
  })

// consuming a promise

 promiseOne.then(function(){ //.then : call back function which returns a value
  console.log("promise consumed");
 }) 

 // another way to this tasks

 new Promisetwo(function(resolve,reject){
  setTimeout(function(){
    console.log("async task 2");
    resolve()
  },1000)
 }).then(function(){
  console.log("async 2 resolved")
 })

 //----creating 3rd promise----//
  const promiseThree = new Promise(function (resolve,reject){
    // suppose a request comes that we have to recive
    setTimeout(function(){
        resolve( {username:"sid",email: "hello@gmail.com"});// we can pass values (arguements) on to this 
    },1000)
  })
  //data consumtion
  promiseThree.then(function(user){
    // parameter that we passed in to resolve can be accessed by promiseThree.then(we can set any name) 
    console.log(user);

  })


  //----creating 4th promise---//

  const promiseFourth = new promise(function(resolve,reject){
        // in case of errors
        let error = true;
      //let error = false; 
        if(!error){
          // if not error then resolve
          resolve({username:"sid",email: "hello@gmail.com"}) //passing object 
        }else {
          // else give an error
           reject('error: something went wrong')
        }

  },1000)

  // consume promise num 4 (.then and .catch)
       
      //promiseFourth.then().catch() --> .then is used to access values of resolve() and .catch is used for error or reject

        promiseFourth.then((user)=>{
          console.log(user);
          return user.username // accessing username only
        }).then((username)=> {  // chaining of .then fun
            console.log(username);
        }).catch(function(error){
              console.log(error)
        }).finally(()=>console.log("promise is either resolved or rejected")) // default case

        // let error = false; incase of false it will  print the username value
      
  

// Promise number 5  

    const promiseFive =  new Promise(function(resolve, reject){
      
      setTimeout(function(){
        let error = true
        if(!error){
          resolve({username:"JS", password:"123"})
        }
        else{
          reject("ERROR: opps! JS went wrong!")
        }

     },1000)
  })

  // consume using async await

  async function consumePromise(){
          //await keyword
          try{   // try and catch 
            const response =  await consumePromise
            console.log(response);
            }catch(error){
                  console.log(error)
          }
  }

  async function fetchData(){
    try{
      const response = await fetch ("https://jsonplaceholder.typicode.com/users") //dummy data
      const data = await response.json() //converting to json
      console.log(data);
    }
    catch(error){
        console.log("error");
    }
    fetchData();
  }


  //------------------------------------FETCH----------------------------------------//

  // it is a global method that starts the process of fetching a resource from the network, and returning a promise when the response is available.
  
  // when an error code 404 is generated by a promise request, it will always be available  as a response since it is not an error.
 
  /*error will happen when it can not request or when the request fails. A fetch() promise only rejects when the request fails, for example, because of a badly-formed request URL or a network error. 
 A fetch() promise does not reject if the server responds with HTTP status codes that indicate errors (404, 504, etc.). Instead, a then() handler must check the Response.ok and/or Response.status properties.*/


